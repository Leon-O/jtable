!function($){var unloadingPage;$(window).on("beforeunload",function(){unloadingPage=!0}),$(window).on("unload",function(){unloadingPage=!1}),$.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:!0,defaultDateFormat:"YYYY-MM-DD",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:!1,loadingAnimationDelay:500,saveUserPreferences:!0,unAuthorizedRequestRedirectUrl:null,tableClass:"",ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:!0,hoverAnimationDuration:60,hoverAnimationEasing:void 0,panelClass:"panel-default",items:[]},closeRequested:function(event,data){},formCreated:function(event,data){},formSubmitting:function(event,data){},formClosed:function(event,data){},loadingRecords:function(event,data){},recordsLoaded:function(event,data){},rowInserted:function(event,data){},rowsRemoved:function(event,data){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function(){this._normalizeFieldsOptions(),this._initializeFields(),this._createFieldAndColumnList(),this._createMainContainer(),this._createTableTitle(),this._createToolBar(),this._createTable(),this._createBusyPanel(),this._createErrorDialogDiv(),this._addNoDataRow(),this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var self=this;$.each(self.options.fields,function(fieldName,props){self._normalizeFieldOptions(fieldName,props)})},_normalizeFieldOptions:function(fieldName,props){if(null==props.listClass&&(props.listClass=""),null==props.inputClass&&(props.inputClass=""),null==props.placeholder&&(props.placeholder=""),props.dependsOn&&"string"===$.type(props.dependsOn)){var dependsOnArray=props.dependsOn.split(",");props.dependsOn=[];for(var i=0;i<dependsOnArray.length;i++)props.dependsOn.push($.trim(dependsOnArray[i]))}},_initializeFields:function(){this._lastPostData={},this._$tableRows=[],this._columnList=[],this._fieldList=[],this._cache=[]},_createFieldAndColumnList:function(){var self=this;$.each(self.options.fields,function(name,props){self._fieldList.push(name),1==props.key&&(self._keyField=name),0!=props.list&&"hidden"!=props.type&&self._columnList.push(name)})},_createMainContainer:function(){this._$mainContainer=$("<div />").addClass("panel").addClass(this.options.toolbar.panelClass).appendTo(this.element)},_createTableTitle:function(){var self=this;if(self._$titleDiv=$("<div />").addClass("panel-heading").appendTo(self._$mainContainer),$("<div />").addClass("panel-title row").appendTo(self._$titleDiv).html('<h4 class="col-md-12">'+self.options.title+"</h4>"),self.options.showCloseButton){var $textSpan=$("<span />").html(self.options.messages.close);$("<button></button>").addClass("jtable-command-button jtable-close-button").attr("title",self.options.messages.close).append($textSpan).appendTo(self._$titleDiv).click(function(e){e.preventDefault(),e.stopPropagation(),self._onCloseRequested()})}},_createTable:function(){var tableContainer=$("<div />").addClass("table-responsive").appendTo(this._$mainContainer);this._$table=$("<table></table>").addClass("table").addClass(this.options.tableClass).appendTo(tableContainer),this.options.tableId&&this._$table.attr("id",this.options.tableId),this._createTableHead(),this._createTableBody()},_createTableHead:function(){var $thead=$("<thead></thead>").appendTo(this._$table);this._addRowToTableHead($thead)},_addRowToTableHead:function($thead){var $tr=$("<tr></tr>").appendTo($thead);this._addColumnsToHeaderRow($tr)},_addColumnsToHeaderRow:function($tr){for(var i=0;i<this._columnList.length;i++){var fieldName=this._columnList[i];this._createHeaderCellForField(fieldName,this.options.fields[fieldName]).appendTo($tr)}},_resizePanel:function(){null!=this._$titleDiv&&null!=this._$titleDiv&&this._$titleDiv.css({width:this._$table.width()})},_createHeaderCellForField:function(fieldName,field){return field.width=field.width||"50px",$("<th></th>").html(field.title).addClass(field.listClass).css("width",field.width).data("fieldName",fieldName)},_createEmptyCommandHeader:function(){return $("<th></th>").css("width","3px")},_createTableBody:function(){this._$tableBody=$("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=$("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer),this._$busyDiv=$("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer),this._hideBusy()},_createErrorDialogDiv:function(){this._$errorDialogDiv=$('<div class="modal fade"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">'+this.options.messages.error+'</h4></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+this.options.messages.close+"</button></div></div></div></div>").appendTo(this._$mainContainer),this._$errorDialogDiv.modal({backdrop:"static",keyboard:!1,show:!1}),this._$errorDialogDiv.on("hidden.bs.modal",function(event){$(this).removeClass("fv-modal-stack"),0<$("body").data("fv_open_modals")&&$("body").data("fv_open_modals",$("body").data("fv_open_modals")-1)}),this._$errorDialogDiv.on("shown.bs.modal",function(event){0<$(this).find("input").length?$(this).find("input:first").focus():0<$(this).find("button").length&&$(this).find("button:first").focus(),void 0===$("body").data("fv_open_modals")&&$("body").data("fv_open_modals",0),$(this).hasClass("fv-modal-stack")||($(this).addClass("fv-modal-stack"),$("body").data("fv_open_modals",$("body").data("fv_open_modals")+1),$(this).css("z-index",1040+10*$("body").data("fv_open_modals")),$(".modal-backdrop").not(".fv-modal-stack").css("z-index",1039+10*$("body").data("fv_open_modals")),$(".modal-backdrop").not("fv-modal-stack").addClass("fv-modal-stack"))})},load:function(postData,completeCallback){this._lastPostData=postData,this._reloadTable(completeCallback)},reload:function(completeCallback){this._reloadTable(completeCallback)},getRowByKey:function(key){for(var i=0;i<this._$tableRows.length;i++)if(key==this._getKeyValueOfRecord(this._$tableRows[i].data("record")))return this._$tableRows[i];return null},destroy:function(){this.element.empty(),$.Widget.prototype.destroy.call(this)},_setOption:function(key,value){},_reloadTable:function(completeCallback){function completeReload(data){self._hideBusy(),"OK"==data.Result?(self._removeAllRows("reloading"),self._addRecordsToTable(data.Records),self._onRecordsLoaded(data),completeCallback&&completeCallback(),self._resizePanel()):self._showError(data.Message)}var self=this;if(self._showBusy(self.options.messages.loadingMessage,self.options.loadingAnimationDelay),self._onLoadingRecords(),$.isFunction(self.options.actions.listAction)){var funcResult=self.options.actions.listAction(self._lastPostData,self._createJtParamsForLoading());self._isDeferredObject(funcResult)?funcResult.done(function(data){completeReload(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError)}).always(function(){self._hideBusy()}):completeReload(funcResult)}else{var loadUrl=self._createRecordLoadUrl();self._ajax({url:loadUrl,data:self._lastPostData,success:function(data){completeReload(data)},error:function(){self._hideBusy(),self._showError(self.options.messages.serverCommunicationError)}})}},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createJtParamsForLoading:function(){return{}},_createRowFromRecord:function(record){var $tr=$("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(record)).data("record",record);return this._addCellsToRowUsingRecord($tr),$tr},_addCellsToRowUsingRecord:function($row){for(var record=$row.data("record"),i=0;i<this._columnList.length;i++)this._createCellForRecordField(record,this._columnList[i]).appendTo($row)},_createCellForRecordField:function(record,fieldName){return $("<td></td>").addClass(this.options.fields[fieldName].listClass).append(this._getDisplayTextForRecordField(record,fieldName))},_addRecordsToTable:function(records){var self=this;$.each(records,function(index,record){self._addRow(self._createRowFromRecord(record))})},_addRow:function($row,options){options=$.extend({index:this._$tableRows.length,isNewRow:!1,animationsEnabled:!0},options),this._$tableRows.length<=0&&this._removeNoDataRow(),options.index=this._normalizeNumber(options.index,0,this._$tableRows.length,this._$tableRows.length),options.index==this._$tableRows.length?(this._$tableBody.append($row),this._$tableRows.push($row)):0==options.index?(this._$tableBody.prepend($row),this._$tableRows.unshift($row)):(this._$tableRows[options.index-1].after($row),this._$tableRows.splice(options.index,0,$row)),this._onRowInserted($row,options.isNewRow),options.isNewRow&&this.options.animationsEnabled&&options.animationsEnabled&&this._showNewRowAnimation($row)},_showNewRowAnimation:function($tableRow){$tableRow.addClass("jtable-row-created","slow","",function(){$tableRow.removeClass("jtable-row-created",5e3)})},_removeRowsFromTable:function($rows,reason){var self=this;$rows.length<=0||($rows.addClass("jtable-row-removed").remove(),$rows.each(function(){var index=self._findRowIndex($(this));0<=index&&self._$tableRows.splice(index,1)}),self._onRowsRemoved($rows,reason),0==self._$tableRows.length&&self._addNoDataRow())},_findRowIndex:function($row){return this._findIndexInArray($row,this._$tableRows,function($row1,$row2){return $row1.data("record")==$row2.data("record")})},_removeAllRows:function(reason){if(!(this._$tableRows.length<=0)){var $rows=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty(),this._$tableRows=[],this._onRowsRemoved($rows,reason),this._addNoDataRow()}},_addNoDataRow:function(){if(!(0<this._$tableBody.find(">tr.jtable-no-data-row").length)){var $tr=$("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody),totalColumnCount=this._$table.find("thead th").length;$("<td></td>").attr("colspan",totalColumnCount).html(this.options.messages.noDataAvailable).appendTo($tr)}},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_getDisplayTextForRecordField:function(record,fieldName){var field=this.options.fields[fieldName],fieldValue=record[fieldName];if(field.display)return field.display({record:record});if("date"==field.type)return this._getDisplayTextForDateRecordField(field,fieldValue);if("checkbox"==field.type)return this._getCheckBoxTextForFieldByValue(fieldName,fieldValue);if(field.options){var options=this._getOptionsForField(fieldName,{record:record,value:fieldValue,source:"list",dependedValues:this._createDependedValuesUsingRecord(record,field.dependsOn)});return this._findOptionByValue(options,fieldValue).DisplayText}return fieldValue},_createDependedValuesUsingRecord:function(record,dependsOn){if(!dependsOn)return{};for(var dependedValues={},i=0;i<dependsOn.length;i++)dependedValues[dependsOn[i]]=record[dependsOn[i]];return dependedValues},_findOptionByValue:function(options,value){for(var i=0;i<options.length;i++)if(options[i].Value==value)return options[i];return{}},_getDisplayTextForDateRecordField:function(field,fieldValue){if(!fieldValue)return"";var displayFormat=field.displayFormat||this.options.defaultDateFormat;return moment(fieldValue).format(displayFormat)},_getOptionsForField:function(fieldName,funcParams){var options,field=this.options.fields[fieldName],optionsSource=field.options;if($.isFunction(optionsSource)&&(optionsSource=optionsSource(funcParams=$.extend(!0,{_cacheCleared:!1,dependedValues:{},clearCache:function(){this._cacheCleared=!0}},funcParams))),"string"==typeof optionsSource){var cacheKey="options_"+fieldName+"_"+optionsSource;if(funcParams._cacheCleared||!this._cache[cacheKey])this._cache[cacheKey]=this._buildOptionsFromArray(this._downloadOptions(fieldName,optionsSource)),this._sortFieldOptions(this._cache[cacheKey],field.optionsSorting);else if(null!=funcParams.value)null==this._findOptionByValue(this._cache[cacheKey],funcParams.value).DisplayText&&(this._cache[cacheKey]=this._buildOptionsFromArray(this._downloadOptions(fieldName,optionsSource)),this._sortFieldOptions(this._cache[cacheKey],field.optionsSorting));options=this._cache[cacheKey]}else options=jQuery.isArray(optionsSource)?this._buildOptionsFromArray(optionsSource):this._buildOptionsArrayFromObject(optionsSource),this._sortFieldOptions(options,field.optionsSorting);return options},_downloadOptions:function(fieldName,url){var self=this,options=[];return self._ajax({url:url,async:!1,success:function(data){"OK"==data.Result?options=data.Options:self._showError(data.Message)},error:function(){var errMessage=self._formatString(self.options.messages.cannotLoadOptionsFor,fieldName);self._showError(errMessage)}}),options},_sortFieldOptions:function(options,sorting){var dataSelector,compareFunc;options&&options.length&&sorting&&(dataSelector=0==sorting.indexOf("value")?function(option){return option.Value}:function(option){return option.DisplayText},compareFunc="string"==$.type(dataSelector(options[0]))?function(option1,option2){return dataSelector(option1).localeCompare(dataSelector(option2))}:function(option1,option2){return dataSelector(option1)-dataSelector(option2)},0<sorting.indexOf("desc")?options.sort(function(a,b){return compareFunc(b,a)}):options.sort(function(a,b){return compareFunc(a,b)}))},_buildOptionsArrayFromObject:function(options){var list=[];return $.each(options,function(propName,propValue){list.push({Value:propName,DisplayText:propValue})}),list},_buildOptionsFromArray:function(optionsArray){for(var list=[],i=0;i<optionsArray.length;i++)$.isPlainObject(optionsArray[i])?list.push(optionsArray[i]):list.push({Value:optionsArray[i],DisplayText:optionsArray[i]});return list},_parseDate:function(dateString){return 0<=dateString.indexOf("Date")?new Date(parseInt(dateString.substr(6),10)):10==dateString.length?new Date(parseInt(dateString.substr(0,4),10),parseInt(dateString.substr(5,2),10)-1,parseInt(dateString.substr(8,2),10)):19==dateString.length?new Date(parseInt(dateString.substr(0,4),10),parseInt(dateString.substr(5,2),10)-1,parseInt(dateString.substr(8,2),10),parseInt(dateString.substr(11,2),10),parseInt(dateString.substr(14,2),10),parseInt(dateString.substr(17,2),10)):(this._logWarn("Given date is not properly formatted: "+dateString),"format error!")},_createToolBar:function(){this._$toolbarDiv=$('<div role="group" />').addClass("btn-group col-md-10").appendTo(this._$titleDiv.find(".panel-title"));for(var i=0;i<this.options.toolbar.items.length;i++)this._addToolBarItem(this.options.toolbar.items[i])},_addToolBarItem:function(item){if(null==item||null==item.text&&null==item.icon)return this._logWarn("Can not add tool bar item since it is not valid!"),this._logWarn(item),null;var $toolBarItem=$('<button type="button" />').addClass("btn btn-sm").appendTo(this._$toolbarDiv);if(item.cssClass?$toolBarItem.addClass(item.cssClass):$toolBarItem.addClass("btn-default"),item.tooltip&&$toolBarItem.attr("title",item.tooltip),item.icon){var $icon=$('<span class="glyphicon" aria-hidden="true"></span> ').appendTo($toolBarItem);!0===item.icon||$.type("string"===item.icon)&&$icon.addClass(item.icon)}item.text&&$toolBarItem.append(item.text),item.click&&$toolBarItem.click(function(){item.click()});return this.options.toolbar.hoverAnimation&&(this.options.toolbar.hoverAnimationDuration,this.options.toolbar.hoverAnimationEasing),$toolBarItem},_formatModalWindow:function($divModal){$divModal.modal({backdrop:"static",keyboard:!1,show:!1}),$divModal.on("hidden.bs.modal",function(event){$divModal.removeClass("fv-modal-stack"),0<$("body").data("fv_open_modals")&&$("body").data("fv_open_modals",$("body").data("fv_open_modals")-1)}),$divModal.on("shown.bs.modal",function(event){0<$divModal.find("input").length?$divModal.find("input:first").focus():0<$divModal.find("button").length&&$divModal.find("button:first").focus(),void 0===$("body").data("fv_open_modals")&&$("body").data("fv_open_modals",0),$divModal.hasClass("fv-modal-stack")||($divModal.addClass("fv-modal-stack"),$("body").data("fv_open_modals",$("body").data("fv_open_modals")+1),$divModal.css("z-index",1040+10*$("body").data("fv_open_modals")),$(".modal-backdrop").not(".fv-modal-stack").css("z-index",1039+10*$("body").data("fv_open_modals")),$(".modal-backdrop").not("fv-modal-stack").addClass("fv-modal-stack"))})},_showError:function(message){message="<p>"+message+"</p>",this._$errorDialogDiv.find(".modal-body").html(message),this._$errorDialogDiv.modal("show")},_setBusyTimer:null,_showBusy:function(message,delay){var self=this;self._$busyDiv.show();function makeVisible(){self._$busyMessageDiv.html(message).show()}if(delay){if(self._setBusyTimer)return;self._setBusyTimer=setTimeout(makeVisible,delay)}else makeVisible()},_hideBusy:function(){clearTimeout(this._setBusyTimer),this._setBusyTimer=null,this._$busyDiv.hide(),this._$busyMessageDiv.html("").hide()},_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_performAjaxCall:function(url,postData,async,success,error){this._ajax({url:url,data:postData,async:async,success:success,error:error})},_unAuthorizedRequestHandler:function(){this.options.unAuthorizedRequestRedirectUrl?location.href=this.options.unAuthorizedRequestRedirectUrl:location.reload(!0)},_ajax:function(options){var self=this,opts={statusCode:{401:function(){self._unAuthorizedRequestHandler()}}};(opts=$.extend(opts,this.options.ajaxSettings,options)).success=function(data){data&&1==data.UnAuthorizedRequest&&self._unAuthorizedRequestHandler(),options.success&&options.success(data)},opts.error=function(jqXHR,textStatus,errorThrown){unloadingPage?jqXHR.abort():options.error&&options.error(arguments)},opts.complete=function(){options.complete&&options.complete()},$.ajax(opts)},_getKeyValueOfRecord:function(record){return record[this._keyField]},_setCookie:function(key,value){key=this._cookieKeyPrefix+key;var expireDate=new Date;expireDate.setDate(expireDate.getDate()+30),document.cookie=encodeURIComponent(key)+"="+encodeURIComponent(value)+"; expires="+expireDate.toUTCString()},_getCookie:function(key){key=this._cookieKeyPrefix+key;for(var equalities=document.cookie.split("; "),i=0;i<equalities.length;i++)if(equalities[i]){var splitted=equalities[i].split("=");if(2==splitted.length&&decodeURIComponent(splitted[0])===key)return decodeURIComponent(splitted[1]||"")}return null},_generateCookieKeyPrefix:function(){var strToHash="";return this.options.tableId&&(strToHash=strToHash+this.options.tableId+"#"),"jtable#"+function(value){var hash=0;if(0==value.length)return hash;for(var i=0;i<value.length;i++){hash=(hash<<5)-hash+value.charCodeAt(i),hash&=hash}return hash}(strToHash=strToHash+this._columnList.join("$")+"#c"+this._$table.find("thead th").length)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(data){this._trigger("recordsLoaded",null,{records:data.Records,serverResponse:data})},_onRowInserted:function($row,isNewRow){this._trigger("rowInserted",null,{row:$row,record:$row.data("record"),isNewRow:isNewRow})},_onRowsRemoved:function($rows,reason){this._trigger("rowsRemoved",null,{rows:$rows,reason:reason})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})}(jQuery),function($){$.extend(!0,$.hik.jtable.prototype,{_getPropertyOfObject:function(obj,propName){if(propName.indexOf(".")<0)return obj[propName];var preDot=propName.substring(0,propName.indexOf(".")),postDot=propName.substring(propName.indexOf(".")+1);return this._getPropertyOfObject(obj[preDot],postDot)},_setPropertyOfObject:function(obj,propName,value){if(propName.indexOf(".")<0)obj[propName]=value;else{var preDot=propName.substring(0,propName.indexOf(".")),postDot=propName.substring(propName.indexOf(".")+1);this._setPropertyOfObject(obj[preDot],postDot,value)}},_insertToArrayIfDoesNotExists:function(array,value){$.inArray(value,array)<0&&array.push(value)},_findIndexInArray:function(value,array,compareFunc){compareFunc=compareFunc||function(a,b){return a==b};for(var i=0;i<array.length;i++)if(compareFunc(value,array[i]))return i;return-1},_normalizeNumber:function(number,min,max,defaultValue){return null==number||null==number||isNaN(number)?defaultValue:number<min?min:max<number?max:number},_formatString:function(){if(0==arguments.length)return null;for(var str=arguments[0],i=1;i<arguments.length;i++){var placeHolder="{"+(i-1)+"}";str=str.replace(placeHolder,arguments[i])}return str},_isDeferredObject:function(obj){return obj.then&&obj.done&&obj.fail},_logDebug:function(text){window.console&&console.log("jTable DEBUG: "+text)},_logInfo:function(text){window.console&&console.log("jTable INFO: "+text)},_logWarn:function(text){window.console&&console.log("jTable WARNING: "+text)},_logError:function(text){window.console&&console.log("jTable ERROR: "+text)}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(elt){var len=this.length,from=Number(arguments[1])||0;for((from=from<0?Math.ceil(from):Math.floor(from))<0&&(from+=len);from<len;from++)if(from in this&&this[from]===elt)return from;return-1})}(jQuery),function($){$.extend(!0,$.hik.jtable.prototype,{_submitFormUsingAjax:function(url,formData,success,error){this._ajax({url:url,data:formData,success:success,error:error})},_createInputLabelForRecordField:function(fieldName){return $('<label for="Edit-'+fieldName+'" />').html(this.options.fields[fieldName].inputTitle||this.options.fields[fieldName].title)},_createInputForRecordField:function(funcParams){var fieldName=funcParams.fieldName,value=funcParams.value,record=funcParams.record,formType=funcParams.formType,form=funcParams.form,field=this.options.fields[fieldName];if(null!=value&&null!=value||(value=field.defaultValue),field.input){var $input=$(field.input({value:value,record:record,formType:formType,form:form}));return $input.attr("id")||$input.attr("id","Edit-"+fieldName),$("<div />").addClass("form-group").addClass(field.divClass).append($input)}return"date"===field.type?this._createDateInputForField(field,fieldName,value):"time"===field.type?this._createTimeInputForField(field,fieldName,value):"datetime"===field.type?this._createDateTimeInputForField(field,fieldName,value):"daterange"===field.type?this._createDateRangeInputForField(field,fieldName,value):"textarea"===field.type?this._createTextAreaForField(field,fieldName,value):"password"===field.type?this._createPasswordInputForField(field,fieldName,value):"checkbox"===field.type?this._createCheckboxForField(field,fieldName,value):"number"===field.type?this._createNumberInputForField(field,fieldName,value):field.options?"radiobutton"===field.type?this._createRadioButtonListForField(field,fieldName,value,record,formType):this._createDropDownListForField(field,fieldName,value,record,formType,form):this._createTextInputForField(field,fieldName,value)},_createInputForHidden:function(fieldName,value){return null==value&&(value=""),$('<input type="hidden" name="'+fieldName+'" id="Edit-'+fieldName+'"></input>').val(value)},_createDateInputForField:function(field,fieldName,value){var $input=$('<input class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" type="text" name="'+fieldName+'"></input>');void 0!==value&&$input.val(value);var displayFormat=field.displayFormat||this.options.defaultDateFormat;$input.daterangepicker({locale:{format:displayFormat},singleDatePicker:!0,showDropdowns:!0});var addon=$("<div />").addClass("input-group-addon").append('<span class="glyphicon glyphicon-calendar"></span>');return $("<div />").addClass("input-group").append($input).append(addon)},_createTimeInputForField:function(field,fieldName,value){var $input=$('<input class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" type="text" name="'+fieldName+'"></input>');void 0!==value&&$input.val(value),$input.timepicker();var addon=$("<div />").addClass("input-group-addon").append('<span class="glyphicon glyphicon-time"></span>');return $("<div />").addClass("input-group").append($input).append(addon)},_createDateTimeInputForField:function(field,fieldName,value){var $input=$('<input class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" type="text" name="'+fieldName+'"></input>'),displayFormat=field.displayFormat||this.options.defaultDateFormat,daterangeoptions=field.daterangeoptions||{locale:{cancelLabel:"Cancel",applyLabel:"Apply",format:displayFormat},singleDatePicker:!0,timePicker:!0,timePickerIncrement:10,showDropdowns:!0};$input.daterangepicker(daterangeoptions),void 0!==value?$input.val(moment(value).format(displayFormat)):$input.val(""),$input.on("cancel.daterangepicker",function(ev,picker){$input.val("")});var addon=$("<div />").addClass("input-group-addon").append('<span class="glyphicon glyphicon-calendar"></span>');return $("<div />").addClass("input-group").append($input).append(addon)},_createDateRangeInputForField:function(field,fieldName,value){var $input=$('<input class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" type="text" name="'+fieldName+'"></input>');void 0!==value&&$input.val(value);var displayFormat=field.displayFormat||this.options.defaultDateFormat,daterangeoptions=field.daterangeoptions||{locale:{cancelLabel:"Cancel",applyLabel:"Apply",format:displayFormat},showDropdowns:!0};$input.daterangepicker(daterangeoptions);var addon=$("<div />").addClass("input-group-addon").append('<i class="glyphicon glyphicon-calendar"></i>');return $("<div />").addClass("input-group").append($input).append(addon)},_createTextAreaForField:function(field,fieldName,value){var $textArea=$('<textarea class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" name="'+fieldName+'" rows="3" placeholder="'+field.placeholder+'"></textarea>');return void 0!==value&&$textArea.val(value),$textArea},_createTextInputForField:function(field,fieldName,value){var disabledField=-1<field.inputClass.indexOf("disabled")?'disabled="disabled"':"",$input=$("<input "+disabledField+' class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" type="text" name="'+fieldName+'" placeholder="'+field.placeholder+'"></input>');return void 0!==value&&$input.val(value),$input},_createNumberInputForField:function(field,fieldName,value){var disabledField=-1<field.inputClass.indexOf("disabled")?'disabled="disabled"':"",$input=$("<input "+disabledField+' class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" type="number" name="'+fieldName+'" placeholder="'+field.placeholder+'"></input>');return void 0!==value&&$input.val(value),$input},_createPasswordInputForField:function(field,fieldName,value){var $input=$('<input class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" type="password" placeholder="'+field.placeholder+'" name="'+fieldName+'"></input>');return void 0!==value&&$input.val(value),$input},_createCheckboxForField:function(field,fieldName,value){var $containerDiv,$checkBox,refreshCheckBoxValueAndText,self=this;void 0===value&&(value=self._getCheckBoxPropertiesForFieldByState(fieldName,!1).Value),$containerDiv=$("<div />").addClass("checkbox");var $labelchk=$("<label />").appendTo($containerDiv);return $checkBox=$('<input class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" type="checkbox" name="'+fieldName+'" >').appendTo($labelchk),$labelchk.append(field.formText||self._getCheckBoxTextForFieldByValue(fieldName,value)),void 0!==value&&$checkBox.val(value),self._getIsCheckBoxSelectedForFieldByValue(fieldName,value)&&$checkBox.attr("checked","checked"),refreshCheckBoxValueAndText=function(){var checkboxProps=self._getCheckBoxPropertiesForFieldByState(fieldName,$checkBox.is(":checked"));$checkBox.attr("value",checkboxProps.Value),$labelchk.html($checkBox+(field.formText||checkboxProps.DisplayText))},$checkBox.click(function(){refreshCheckBoxValueAndText()}),$checkBox.on("change",function(){refreshCheckBoxValueAndText()}),$containerDiv},_createDropDownListForField:function(field,fieldName,value,record,source,form){var $select,options;return $select=$('<select class="form-control '+field.inputClass+'" id="Edit-'+fieldName+'" name="'+fieldName+'"></select>'),options=this._getOptionsForField(fieldName,{record:record,source:source,form:form,dependedValues:this._createDependedValuesUsingForm(form,field.dependsOn)}),this._fillDropDownListWithOptions($select,options,value),$select},_fillDropDownListWithOptions:function($select,options,value){$select.empty();for(var i=0;i<options.length;i+=1)$("<option"+(options[i].Value==value?' selected="selected"':"")+">"+options[i].DisplayText+"</option>").val(options[i].Value).appendTo($select)},_createDependedValuesUsingForm:function($form,dependsOn){if(!dependsOn)return{};for(var dependedValues={},i=0;i<dependsOn.length;i++){var dependedField=dependsOn[i],$dependsOn=$form.find("select[name="+dependedField+"]");$dependsOn.length<=0||(dependedValues[dependedField]=$dependsOn.val())}return dependedValues},_createRadioButtonListForField:function(field,fieldName,value,record,source){var $containerDiv=$("<div />").addClass("jtable-input jtable-radiobuttonlist-input"),options=this._getOptionsForField(fieldName,{record:record,source:source});return $.each(options,function(i,option){var $radioButtonDiv=$('<div class=""></div>').addClass("jtable-radio-input").appendTo($containerDiv),$radioButton=$('<input type="radio" id="Edit-'+fieldName+"-"+i+'" class="'+field.inputClass+'" name="'+fieldName+'"'+(option.Value==value+""?' checked="true"':"")+" />").val(option.Value).appendTo($radioButtonDiv),$textSpan=$("<span></span>").html(option.DisplayText).appendTo($radioButtonDiv);0!=field.setOnTextClick&&$textSpan.addClass("jtable-option-text-clickable").click(function(){$radioButton.is(":checked")||$radioButton.attr("checked",!0)})}),$containerDiv},_getCheckBoxTextForFieldByValue:function(fieldName,value){return this.options.fields[fieldName].values[value]},_getIsCheckBoxSelectedForFieldByValue:function(fieldName,value){return this._createCheckBoxStateArrayForFieldWithCaching(fieldName)[1].Value.toString()==value.toString()},_getCheckBoxPropertiesForFieldByState:function(fieldName,checked){return this._createCheckBoxStateArrayForFieldWithCaching(fieldName)[checked?1:0]},_createCheckBoxStateArrayForFieldWithCaching:function(fieldName){var cacheKey="checkbox_"+fieldName;return this._cache[cacheKey]||(this._cache[cacheKey]=this._createCheckBoxStateArrayForField(fieldName)),this._cache[cacheKey]},_createCheckBoxStateArrayForField:function(fieldName){var stateArray=[],currentIndex=0;return $.each(this.options.fields[fieldName].values,function(propName,propValue){currentIndex++<2&&stateArray.push({Value:propName,DisplayText:propValue})}),stateArray},_makeCascadeDropDowns:function($form,record,source){var self=this;$form.find("select").each(function(){var $thisDropdown=$(this),fieldName=$thisDropdown.attr("name");if(fieldName){var field=self.options.fields[fieldName];field.dependsOn&&$.each(field.dependsOn,function(index,dependsOnField){$form.find("select[name="+dependsOnField+"]").change(function(){var funcParams={record:record,source:source,form:$form,dependedValues:{}};funcParams.dependedValues=self._createDependedValuesUsingForm($form,field.dependsOn);var options=self._getOptionsForField(fieldName,funcParams);self._fillDropDownListWithOptions($thisDropdown,options,void 0),$thisDropdown.change()})})}})},_updateRecordValuesFromForm:function(record,$form){for(var i=0;i<this._fieldList.length;i++){var fieldName=this._fieldList[i],field=this.options.fields[fieldName];if(0!=field.edit){var $inputElement=$form.find('[name="'+fieldName+'"]');if(!($inputElement.length<=0))if("date"==field.type){var dateVal=$inputElement.val();if(dateVal){var displayFormat=field.displayFormat||this.options.defaultDateFormat;try{var date=$.datepicker.parseDate(displayFormat,dateVal);record[fieldName]="/Date("+date.getTime()+")/"}catch(e){this._logWarn("Date format is incorrect for field "+fieldName+": "+dateVal),record[fieldName]=void 0}}else this._logDebug("Date is empty for "+fieldName),record[fieldName]=void 0}else if(field.options&&"radiobutton"==field.type){var $checkedElement=$inputElement.filter(":checked");$checkedElement.length?record[fieldName]=$checkedElement.val():record[fieldName]=void 0}else record[fieldName]=$inputElement.val()}}},_setEnabledOfDialogButton:function($button,enabled,buttonText){$button&&(0!=enabled?$button.removeAttr("disabled").removeClass("ui-state-disabled"):$button.attr("disabled","disabled").addClass("ui-state-disabled"),buttonText&&$button.find("span").text(buttonText))}})}(jQuery),function($){var base={_create:$.hik.jtable.prototype._create,_formatModalWindow:$.hik.jtable.prototype._formatModalWindow};$.extend(!0,$.hik.jtable.prototype,{options:{recordAdded:function(event,data){},messages:{addNewRecord:"Add new record"}},_$addRecordDiv:null,_create:function(){base._create.apply(this,arguments),this.options.actions.createAction&&this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function(){var self=this;self._$addRecordDiv=$("<div />").appendTo(self._$mainContainer),self._$addRecordDiv.addClass("modal fade"),self._$addRecordDiv.css({width:"auto"}),self._$addRecordDiv.append('<div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>'+self.options.messages.addNewRecord+'</h4></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+self.options.messages.cancel+'</button><button type="button" id="AddRecordDialogSaveButton" class="btn btn-primary">'+self.options.messages.save+"</button></div></div></div>"),self._$addRecordDiv.find("#AddRecordDialogSaveButton").click(function(event){self._onSaveClickedOnCreateForm()}),self._formatModalWindow(self._$addRecordDiv),self._$addRecordDiv.on("hidden.bs.modal",function(event){var $addRecordForm=self._$addRecordDiv.find("form").first(),$saveButton=self._$addRecordDiv.find("#AddRecordDialogSaveButton").first();self._trigger("formClosed",null,{form:$addRecordForm,formType:"create"}),self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save),$addRecordForm.remove()}),self._$addRecordDiv.on("keyup",function(evt){27==evt.keyCode&&self._$addRecordDiv.modal("hide")}),self.options.addRecordButton?self.options.addRecordButton.click(function(e){e.preventDefault(),self._showAddRecordForm()}):self._addToolBarItem({icon:"glyphicon-plus",cssClass:"btn-default",text:self.options.messages.addNewRecord,click:function(){self._showAddRecordForm()}})},_onSaveClickedOnCreateForm:function(){var $saveButton=this._$addRecordDiv.parent().find("#AddRecordDialogSaveButton"),$addRecordForm=this._$addRecordDiv.find("form");0!=this._trigger("formSubmitting",null,{form:$addRecordForm,formType:"create"})&&(this._setEnabledOfDialogButton($saveButton,!1,this.options.messages.saving),this._saveAddRecordForm($addRecordForm,$saveButton))},showCreateForm:function(){this._showAddRecordForm()},addRecord:function(options){var self=this;if((options=$.extend({clientOnly:!1,animationsEnabled:self.options.animationsEnabled,success:function(){},error:function(){}},options)).record){if(options.clientOnly)return self._addRow(self._createRowFromRecord(options.record),{isNewRow:!0,animationsEnabled:options.animationsEnabled}),void options.success();function completeAddRecord(data){return"OK"!=data.Result?(self._showError(data.Message),void options.error(data)):data.Record?(self._onRecordAdded(data),self._addRow(self._createRowFromRecord(data.Record),{isNewRow:!0,animationsEnabled:options.animationsEnabled}),void options.success(data)):(self._logError("Server must return the created Record object."),void options.error(data))}if(!options.url&&$.isFunction(self.options.actions.createAction)){var funcResult=self.options.actions.createAction($.param(options.record));self._isDeferredObject(funcResult)?funcResult.done(function(data){completeAddRecord(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError),options.error()}):completeAddRecord(funcResult)}else self._submitFormUsingAjax(options.url||self.options.actions.createAction,$.param(options.record),function(data){completeAddRecord(data)},function(){self._showError(self.options.messages.serverCommunicationError),options.error()})}else self._logWarn("options parameter in addRecord method must contain a record property.")},_showAddRecordForm:function(){var $rowRecordsContainers,self=this,$addRecordForm=$("<form></form>");$rowRecordsContainers=$('<div class="row" ></div>').appendTo($addRecordForm);for(var i=0;i<self._fieldList.length;i++){var fieldName=self._fieldList[i],field=self.options.fields[fieldName];if((1!=field.key||1==field.create)&&0!=field.create)if("hidden"!=field.type){void 0===field.divClass&&(field.divClass="col-md-12");var $fieldContainer=$("<div />").addClass("form-group").addClass(field.divClass).appendTo($rowRecordsContainers);$fieldContainer.append(self._createInputLabelForRecordField(fieldName)),$fieldContainer.append(field.nextItem),$fieldContainer.append(self._createInputForRecordField({fieldName:fieldName,formType:"create",form:$addRecordForm}))}else $addRecordForm.append(self._createInputForHidden(fieldName,field.defaultValue))}self._makeCascadeDropDowns($addRecordForm,void 0,"create"),$addRecordForm.submit(function(){return self._onSaveClickedOnCreateForm(),!1}),self._$addRecordDiv.find(".modal-body").html($addRecordForm),self._$addRecordDiv.modal("show"),self._trigger("formCreated",null,{form:$addRecordForm,formType:"create"})},_saveAddRecordForm:function($addRecordForm,$saveButton){function completeAddRecord(data){return"OK"!=data.Result?(self._showError(data.Message),void self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save)):data.Record?(self._onRecordAdded(data),self._addRow(self._createRowFromRecord(data.Record),{isNewRow:!0}),void self._$addRecordDiv.modal("hide")):(self._logError("Server must return the created Record object."),void self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save))}var self=this;if($addRecordForm.data("submitting",!0),$.isFunction(self.options.actions.createAction)){var funcResult=self.options.actions.createAction($addRecordForm.serialize());self._isDeferredObject(funcResult)?funcResult.done(function(data){completeAddRecord(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError),self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save)}):completeAddRecord(funcResult)}else self._submitFormUsingAjax(self.options.actions.createAction,$addRecordForm.serialize(),function(data){completeAddRecord(data)},function(){self._showError(self.options.messages.serverCommunicationError),self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save)})},_onRecordAdded:function(data){this._trigger("recordAdded",null,{record:data.Record,serverResponse:data})}})}(jQuery),function($){var base={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord,_formatModalWindow:$.hik.jtable.prototype._formatModalWindow};$.extend(!0,$.hik.jtable.prototype,{options:{recordUpdated:function(event,data){},rowUpdated:function(event,data){},messages:{editRecord:"Edit Record"}},_$editDiv:null,_$editingRow:null,_create:function(){base._create.apply(this,arguments),this.options.actions.updateAction&&this._createEditDialogDiv()},_createEditDialogDiv:function(){var self=this;self._$editDiv=$("<div></div>").appendTo(self._$mainContainer),self._$editDiv.addClass("modal fade"),self._$editDiv.css({width:"auto"}),self._$editDiv.append('<div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>'+self.options.messages.editRecord+'</h4></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+self.options.messages.cancel+'</button><button type="button" id="EditDialogSaveButton" class="btn btn-primary">'+self.options.messages.save+"</button></div></div></div>"),self._$editDiv.find("#EditDialogSaveButton").click(function(event){self._onSaveClickedOnEditForm()}),self._formatModalWindow(self._$editDiv),self._$editDiv.on("hidden.bs.modal",function(event){var $editForm=self._$editDiv.find("form:first"),$saveButton=$("#EditDialogSaveButton");self._trigger("formClosed",null,{form:$editForm,formType:"edit",row:self._$editingRow}),self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save),$editForm.remove()}),self._$editDiv.on("keyup",function(evt){27==evt.keyCode&&self._$editDiv.modal("hide")})},_onSaveClickedOnEditForm:function(){if(this._$editingRow.hasClass("jtable-row-removed"))this._$editDiv.modal("hide");else{var $saveButton=this._$editDiv.parent().find("#EditDialogSaveButton"),$editForm=this._$editDiv.find("form");0!=this._trigger("formSubmitting",null,{form:$editForm,formType:"edit",row:this._$editingRow})&&(this._setEnabledOfDialogButton($saveButton,!1,this.options.messages.saving),this._saveEditForm($editForm,$saveButton))}},updateRecord:function(options){var self=this;if((options=$.extend({clientOnly:!1,animationsEnabled:self.options.animationsEnabled,success:function(){},error:function(){}},options)).record){var key=self._getKeyValueOfRecord(options.record);if(null!=key&&null!=key){var $updatingRow=self.getRowByKey(key);if(null!=$updatingRow){if(options.clientOnly)return $.extend($updatingRow.data("record"),options.record),self._updateRowTexts($updatingRow),self._onRecordUpdated($updatingRow,null),options.animationsEnabled&&self._showUpdateAnimationForRow($updatingRow),void options.success();function completeEdit(data){if("OK"!=data.Result)return self._showError(data.Message),void options.error(data);$.extend($updatingRow.data("record"),options.record),self._updateRecordValuesFromServerResponse($updatingRow.data("record"),data),self._updateRowTexts($updatingRow),self._onRecordUpdated($updatingRow,data),options.animationsEnabled&&self._showUpdateAnimationForRow($updatingRow),options.success(data)}if(!options.url&&$.isFunction(self.options.actions.updateAction)){var funcResult=self.options.actions.updateAction($.param(options.record));self._isDeferredObject(funcResult)?funcResult.done(function(data){completeEdit(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError),options.error()}):completeEdit(funcResult)}else self._submitFormUsingAjax(options.url||self.options.actions.updateAction,$.param(options.record),function(data){completeEdit(data)},function(){self._showError(self.options.messages.serverCommunicationError),options.error()})}else self._logWarn('Can not found any row by key "'+key+'" on the table. Updating row must be visible on the table.')}else self._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.")}else self._logWarn("options parameter in updateRecord method must contain a record property.")},_addColumnsToHeaderRow:function($tr){base._addColumnsToHeaderRow.apply(this,arguments),null!=this.options.actions.updateAction&&$tr.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function($row){var self=this;if(base._addCellsToRowUsingRecord.apply(this,arguments),null!=self.options.actions.updateAction){var $span=$('<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>'),$button=$('<button type="button" title="'+self.options.messages.editRecord+'"></button>').addClass("btn btn-xs btn-info").append($span).click(function(e){e.preventDefault(),e.stopPropagation(),self._showEditForm($row)});$("<td />").append($button).appendTo($row)}},_showEditForm:function($tableRow){var $rowRecordsContainers,self=this,record=$tableRow.data("record"),$editForm=$("<form></form>");$rowRecordsContainers=$('<div class="row" ></div>').appendTo($editForm);for(var i=0;i<self._fieldList.length;i++){var fieldName=self._fieldList[i],field=self.options.fields[fieldName],fieldValue=record[fieldName];if(1==field.key){if(1!=field.edit){$editForm.append(self._createInputForHidden(fieldName,fieldValue));continue}$editForm.append(self._createInputForHidden("jtRecordKey",fieldValue))}if(0!=field.edit)if("hidden"!=field.type){void 0===field.divClass&&(field.divClass="col-md-12");var $fieldContainer=$("<div />").addClass("form-group").addClass(field.divClass).appendTo($rowRecordsContainers);$fieldContainer.append(self._createInputLabelForRecordField(fieldName)),$fieldContainer.append(field.nextItem);var currentValue=self._getValueForRecordField(record,fieldName);$fieldContainer.append(self._createInputForRecordField({fieldName:fieldName,value:currentValue,record:record,formType:"edit",form:$editForm}))}else $editForm.append(self._createInputForHidden(fieldName,fieldValue))}self._makeCascadeDropDowns($editForm,record,"edit"),$editForm.submit(function(){return self._onSaveClickedOnEditForm(),!1}),self._$editingRow=$tableRow,self._$editDiv.find(".modal-body").html($editForm),self._$editDiv.modal("show"),self._trigger("formCreated",null,{form:$editForm,formType:"edit",record:record,row:$tableRow})},_saveEditForm:function($editForm,$saveButton){function completeEdit(data){if("OK"!=data.Result)return self._showError(data.Message),void self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save);var record=self._$editingRow.data("record");self._updateRecordValuesFromForm(record,$editForm),self._updateRecordValuesFromServerResponse(record,data),self._updateRowTexts(self._$editingRow),self._$editingRow.attr("data-record-key",self._getKeyValueOfRecord(record)),self._onRecordUpdated(self._$editingRow,data),self.options.animationsEnabled&&self._showUpdateAnimationForRow(self._$editingRow),self._$editDiv.modal("hide")}var self=this;if($.isFunction(self.options.actions.updateAction)){var funcResult=self.options.actions.updateAction($editForm.serialize());self._isDeferredObject(funcResult)?funcResult.done(function(data){completeEdit(data)}).fail(function(){self._showError(self.options.messages.serverCommunicationError),self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save)}):completeEdit(funcResult)}else self._submitFormUsingAjax(self.options.actions.updateAction,$editForm.serialize(),function(data){completeEdit(data)},function(){self._showError(self.options.messages.serverCommunicationError),self._setEnabledOfDialogButton($saveButton,!0,self.options.messages.save)})},_updateRecordValuesFromServerResponse:function(record,serverResponse){serverResponse&&serverResponse.Record&&$.extend(!0,record,serverResponse.Record)},_getValueForRecordField:function(record,fieldName){var field=this.options.fields[fieldName],fieldValue=record[fieldName];return"date"==field.type?this._getDisplayTextForDateRecordField(field,fieldValue):fieldValue},_updateRowTexts:function($tableRow){for(var record=$tableRow.data("record"),$columns=$tableRow.find("td"),i=0;i<this._columnList.length;i++){var displayItem=this._getDisplayTextForRecordField(record,this._columnList[i]);0===displayItem&&(displayItem="0"),$columns.eq(this._firstDataColumnOffset+i).html(displayItem||"")}this._onRowUpdated($tableRow)},_showUpdateAnimationForRow:function($tableRow){var className="jtable-row-updated";this.options.jqueryuiTheme&&(className+=" ui-state-highlight"),$tableRow.stop(!0,!0).addClass(className,"slow","",function(){$tableRow.removeClass(className,5e3)})},_onRowUpdated:function($row){this._trigger("rowUpdated",null,{row:$row,record:$row.data("record")})},_onRecordUpdated:function($row,data){this._trigger("recordUpdated",null,{record:$row.data("record"),row:$row,serverResponse:data})}})}(jQuery),function($){var base={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord,_formatModalWindow:$.hik.jtable.prototype._formatModalWindow};$.extend(!0,$.hik.jtable.prototype,{options:{deleteConfirmation:!0,recordDeleted:function(event,data){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){base._create.apply(this,arguments),this.options.actions.deleteAction&&this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var self=this;self._$deleteRecordDiv=$("<div />").appendTo(self._$mainContainer),self._$deleteRecordDiv.addClass("modal fade"),self._$deleteRecordDiv.append('<div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>'+self.options.messages.areYouSure+'</h4></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+self.options.messages.cancel+'</button><button type="button" id="DeleteDialogButton" class="btn btn-danger">'+self.options.messages.deleteText+"</button></div>"),self._formatModalWindow(self._$deleteRecordDiv),self._$deleteRecordDiv.find("#DeleteDialogButton").click(function(event){if(self._$deletingRow.hasClass("jtable-row-removed"))self._$deleteRecordDiv.dialog("close");else{var $deleteButton=$(this);self._setEnabledOfDialogButton($deleteButton,!1,self.options.messages.deleting),self._deleteRecordFromServer(self._$deletingRow,function(){self._removeRowsFromTableWithAnimation(self._$deletingRow),self._$deleteRecordDiv.modal("hide")},function(message){self._showError(message),self._setEnabledOfDialogButton($deleteButton,!0,self.options.messages.deleteText)})}}),self._$deleteRecordDiv.on("hidden.bs.modal",function(event){var $deleteButton=$(this).find("#DeleteDialogButton");self._setEnabledOfDialogButton($deleteButton,!0,self.options.messages.deleteText),$(this).removeClass("fv-modal-stack"),0<$("body").data("fv_open_modals")&&$("body").data("fv_open_modals",$("body").data("fv_open_modals")-1)}),self._$deleteRecordDiv.on("keyup",function(evt){27==evt.keyCode&&self._$deleteRecordDiv.modal("hide")})},deleteRows:function($rows){var self=this;if($rows.length<=0)self._logWarn("No rows specified to jTable deleteRows method.");else if(self._isBusy())self._logWarn("Can not delete rows since jTable is busy!");else if(1!=$rows.length){self._showBusy(self._formatString(self.options.messages.deleteProggress,0,$rows.length));function isCompleted(){return completedCount>=$rows.length}function completed(){var $deletedRows=$rows.filter(".jtable-row-ready-to-remove");$deletedRows.length<$rows.length&&self._showError(self._formatString(self.options.messages.canNotDeletedRecords,$rows.length-$deletedRows.length,$rows.length)),0<$deletedRows.length&&self._removeRowsFromTableWithAnimation($deletedRows),self._hideBusy()}var completedCount=0,deletedCount=0;$rows.each(function(){var $row=$(this);self._deleteRecordFromServer($row,function(){++deletedCount,++completedCount,$row.addClass("jtable-row-ready-to-remove"),self._showBusy(self._formatString(self.options.messages.deleteProggress,deletedCount,$rows.length)),isCompleted()&&completed()},function(){++completedCount,isCompleted()&&completed()})})}else self._deleteRecordFromServer($rows,function(){self._removeRowsFromTableWithAnimation($rows)},function(message){self._showError(message)})},deleteRecord:function(options){var self=this;if(null!=(options=$.extend({clientOnly:!1,animationsEnabled:self.options.animationsEnabled,url:self.options.actions.deleteAction,success:function(){},error:function(){}},options)).key){var $deletingRow=self.getRowByKey(options.key);if(null!=$deletingRow)return options.clientOnly?(self._removeRowsFromTableWithAnimation($deletingRow,options.animationsEnabled),void options.success()):void self._deleteRecordFromServer($deletingRow,function(data){self._removeRowsFromTableWithAnimation($deletingRow,options.animationsEnabled),options.success(data)},function(message){self._showError(message),options.error(message)},options.url);self._logWarn("Can not found any row by key: "+options.key)}else self._logWarn("options parameter in deleteRecord method must contain a key property.")},_addColumnsToHeaderRow:function($tr){base._addColumnsToHeaderRow.apply(this,arguments),null!=this.options.actions.deleteAction&&$tr.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function($row){base._addCellsToRowUsingRecord.apply(this,arguments);var self=this;if(null!=self.options.actions.deleteAction){var $span=$('<span class="glyphicon glyphicon-trash"></span>'),$button=$('<button type="button" title="'+self.options.messages.deleteText+'"></button>').addClass("btn btn-xs btn-danger").append($span).click(function(e){e.preventDefault(),e.stopPropagation(),self._deleteButtonClickedForRow($row)});$("<td></td>").addClass("jtable-command-column").append($button).appendTo($row)}},_deleteButtonClickedForRow:function($row){var deleteConfirm,self=this,deleteConfirmMessage=self.options.messages.deleteConfirmation;if($.isFunction(self.options.deleteConfirmation)){var data={row:$row,record:$row.data("record"),deleteConfirm:!0,deleteConfirmMessage:deleteConfirmMessage,cancel:!1,cancelMessage:null};if(self.options.deleteConfirmation(data),data.cancel)return void(data.cancelMessage&&self._showError(data.cancelMessage));deleteConfirmMessage=data.deleteConfirmMessage,deleteConfirm=data.deleteConfirm}else deleteConfirm=self.options.deleteConfirmation;0!=deleteConfirm?(deleteConfirmMessage="<p>"+deleteConfirmMessage+"</p>",self._$deleteRecordDiv.find(".modal-body").html(deleteConfirmMessage),self._showDeleteDialog($row)):self._deleteRecordFromServer($row,function(){self._removeRowsFromTableWithAnimation($row)},function(message){self._showError(message)})},_showDeleteDialog:function($row){this._$deletingRow=$row,this._$deleteRecordDiv.modal("show")},_deleteRecordFromServer:function($row,success,error,url){function completeDelete(data){if("OK"!=data.Result)return $row.data("deleting",!1),void(error&&error(data.Message));self._trigger("recordDeleted",null,{record:$row.data("record"),row:$row,serverResponse:data}),success&&success(data)}var self=this;if(1!=$row.data("deleting")){$row.data("deleting",!0);var postData={};if(postData[self._keyField]=self._getKeyValueOfRecord($row.data("record")),!url&&$.isFunction(self.options.actions.deleteAction)){var funcResult=self.options.actions.deleteAction(postData);self._isDeferredObject(funcResult)?funcResult.done(function(data){completeDelete(data)}).fail(function(){$row.data("deleting",!1),error&&error(self.options.messages.serverCommunicationError)}):completeDelete(funcResult)}else this._ajax({url:url||self.options.actions.deleteAction,data:postData,success:function(data){completeDelete(data)},error:function(){$row.data("deleting",!1),error&&error(self.options.messages.serverCommunicationError)}})}},_removeRowsFromTableWithAnimation:function($rows,animationsEnabled){var self=this;if(null==animationsEnabled&&(animationsEnabled=self.options.animationsEnabled),animationsEnabled){var className="jtable-row-deleting";this.options.jqueryuiTheme&&(className+=" ui-state-disabled"),$rows.stop(!0,!0).addClass(className,"slow","").promise().done(function(){self._removeRowsFromTable($rows,"deleted")})}else self._removeRowsFromTable($rows,"deleted")}})}(jQuery),function($){var base={_create:$.hik.jtable.prototype._create,_addColumnsToHeaderRow:$.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:$.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:$.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:$.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:$.hik.jtable.prototype._onRowsRemoved};$.extend(!0,$.hik.jtable.prototype,{options:{selecting:!1,multiselect:!1,selectingCheckboxes:!1,selectOnRowClick:!0,selectionChanged:function(event,data){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:!1,_create:function(){this.options.selecting&&this.options.selectingCheckboxes&&(++this._firstDataColumnOffset,this._bindKeyboardEvents()),base._create.apply(this,arguments)},_bindKeyboardEvents:function(){var self=this;$(document).keydown(function(event){switch(event.which){case 16:self._shiftKeyDown=!0}}).keyup(function(event){switch(event.which){case 16:self._shiftKeyDown=!1}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function($rows){this._selectRows($rows),this._onSelectionChanged()},_addColumnsToHeaderRow:function($tr){this.options.selecting&&this.options.selectingCheckboxes&&(this.options.multiselect?$tr.append(this._createSelectAllHeader()):$tr.append(this._createEmptyCommandHeader())),base._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function($row){this.options.selecting&&this._makeRowSelectable($row),base._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){this.options.selecting&&this._storeSelectionList(),base._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){this.options.selecting&&this._restoreSelectionList(),base._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function($rows,reason){this.options.selecting&&"reloading"!=reason&&0<$rows.filter(".jtable-row-selected").length&&this._onSelectionChanged(),base._onRowsRemoved.apply(this,arguments)},_createSelectAllHeader:function(){var self=this,$columnHeader=$('<th class=""></th>').addClass("jtable-command-column-header jtable-column-header-selecting"),$headerContainer=$("<div />").addClass("jtable-column-header-container").appendTo($columnHeader);return self._$selectAllCheckbox=$('<input type="checkbox" />').appendTo($headerContainer).click(function(){if(self._$tableRows.length<=0)self._$selectAllCheckbox.attr("checked",!1);else{var allRows=self._$tableBody.find(">tr.jtable-data-row");self._$selectAllCheckbox.is(":checked")?self._selectRows(allRows):self._deselectRows(allRows),self._onSelectionChanged()}}),$columnHeader},_storeSelectionList:function(){var self=this;self.options.selecting&&(self._selectedRecordIdsBeforeLoad=[],self._getSelectedRows().each(function(){self._selectedRecordIdsBeforeLoad.push(self._getKeyValueOfRecord($(this).data("record")))}))},_restoreSelectionList:function(){if(this.options.selecting){for(var selectedRowCount=0,i=0;i<this._$tableRows.length;++i){var recordId=this._getKeyValueOfRecord(this._$tableRows[i].data("record"));-1<$.inArray(recordId,this._selectedRecordIdsBeforeLoad)&&(this._selectRows(this._$tableRows[i]),++selectedRowCount)}0<this._selectedRecordIdsBeforeLoad.length&&this._selectedRecordIdsBeforeLoad.length!=selectedRowCount&&this._onSelectionChanged(),this._selectedRecordIdsBeforeLoad=[],this._refreshSelectAllCheckboxState()}},_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function($row){var self=this;if(self.options.selectOnRowClick&&$row.click(function(){self._invertRowSelection($row)}),self.options.selectingCheckboxes){var $cell=$("<td></td>").addClass("jtable-selecting-column"),$selectCheckbox=$('<input type="checkbox" />').appendTo($cell);self.options.selectOnRowClick||$selectCheckbox.click(function(){self._invertRowSelection($row)}),$row.append($cell)}},_invertRowSelection:function($row){if($row.hasClass("jtable-row-selected"))this._deselectRows($row);else if(this._shiftKeyDown){var rowIndex=this._findRowIndex($row),beforeIndex=this._findFirstSelectedRowIndexBeforeIndex(rowIndex)+1;if(0<beforeIndex&&beforeIndex<rowIndex)this._selectRows(this._$tableBody.find("tr").slice(beforeIndex,rowIndex+1));else{var afterIndex=this._findFirstSelectedRowIndexAfterIndex(rowIndex)-1;rowIndex<afterIndex?this._selectRows(this._$tableBody.find("tr").slice(rowIndex,1+afterIndex)):this._selectRows($row)}}else this._selectRows($row);this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(rowIndex){for(var i=rowIndex-1;0<=i;--i)if(this._$tableRows[i].hasClass("jtable-row-selected"))return i;return-1},_findFirstSelectedRowIndexAfterIndex:function(rowIndex){for(var i=rowIndex+1;i<this._$tableRows.length;++i)if(this._$tableRows[i].hasClass("jtable-row-selected"))return i;return-1},_selectRows:function($rows){this.options.multiselect||this._deselectRows(this._getSelectedRows()),$rows.addClass("jtable-row-selected"),this.options.selectingCheckboxes&&$rows.find(">td.jtable-selecting-column >input").prop("checked",!0),this._refreshSelectAllCheckboxState()},_deselectRows:function($rows){$rows.removeClass("jtable-row-selected ui-state-highlight"),this.options.selectingCheckboxes&&$rows.find(">td.jtable-selecting-column >input").prop("checked",!1),this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(this.options.selectingCheckboxes&&this.options.multiselect){var totalRowCount=this._$tableRows.length,selectedRowCount=this._getSelectedRows().length;0==selectedRowCount?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!1)):selectedRowCount==totalRowCount?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!0)):(this._$selectAllCheckbox.attr("checked",!1),this._$selectAllCheckbox.prop("indeterminate",!0))}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})}(jQuery),function($){var base={load:$.hik.jtable.prototype.load,_create:$.hik.jtable.prototype._create,_setOption:$.hik.jtable.prototype._setOption,_createRecordLoadUrl:$.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:$.hik.jtable.prototype._createJtParamsForLoading,_addRowToTable:$.hik.jtable.prototype._addRowToTable,_addRow:$.hik.jtable.prototype._addRow,_removeRowsFromTable:$.hik.jtable.prototype._removeRowsFromTable,_onRecordsLoaded:$.hik.jtable.prototype._onRecordsLoaded,_resizePanel:$.hik.jtable.prototype._resizePanel};$.extend(!0,$.hik.jtable.prototype,{options:{paging:!1,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:!0,messages:{pagingInfo:"Showing {0}-{1} of {2} entries",pageSizeChangeLabel:"Row count: "}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){base._create.apply(this,arguments),this.options.paging&&(this._loadPagingSettings(),this._createBottomPanel(),this._createPageListArea(),this._createPageSizeSelection())},_loadPagingSettings:function(){if(this.options.saveUserPreferences){var pageSize=this._getCookie("page-size");pageSize&&(this.options.pageSize=this._normalizeNumber(pageSize,1,1e6,this.options.pageSize))}},_createBottomPanel:function(){this._$bottomPanel=$("<div />").addClass("panel-footer").appendTo(this._$mainContainer),$("<div />").addClass("jtable-left-area").addClass("pull-left").css("margin-top","5px").appendTo(this._$bottomPanel),$("<div />").addClass("jtable-right-area").css({"text-align":"right"}).appendTo(this._$bottomPanel)},_createPageListArea:function(){this._$pagingListArea=$("<ul></ul>").addClass("pagination pagination-sm").css({"margin-top":"0","margin-bottom":"0"}).appendTo(this._$bottomPanel.find(".jtable-right-area")),this._$pageInfoSpan=$("<span></span>").addClass("jtable-page-info").appendTo(this._$bottomPanel.find(".jtable-left-area"))},_createPageSizeSelection:function(){var self=this;if(self.options.pageSizeChangeArea){self._findIndexInArray(self.options.pageSize,self.options.pageSizes)<0&&(self.options.pageSizes.push(parseInt(self.options.pageSize)),self.options.pageSizes.sort(function(a,b){return a-b})),self._$pageSizeChangeArea=$("<div />").addClass("col-md-2").appendTo(self._$titleDiv.find(".panel-title"));var $pageSizeChangeCombobox=$("<select></select>").css({color:"black"}).appendTo(self._$pageSizeChangeArea);self._$pageSizeChangeArea.append(self.options.messages.pageSizeChangeLabel).append($pageSizeChangeCombobox);for(var i=0;i<self.options.pageSizes.length;i++)$pageSizeChangeCombobox.append('<option value="'+self.options.pageSizes[i]+'">'+self.options.pageSizes[i]+"</option>");$pageSizeChangeCombobox.val(self.options.pageSize),$pageSizeChangeCombobox.change(function(){self._changePageSize(parseInt($(this).val()))})}},_resizePanel:function(){base._resizePanel.apply(this,arguments),null!=this._$bottomPanel&&null!=this._$bottomPanel&&this._$bottomPanel.css({width:this._$table.width()})},load:function(){this._currentPageNo=1,base.load.apply(this,arguments),this._resizePanel()},_setOption:function(key,value){base._setOption.apply(this,arguments),"pageSize"==key&&this._changePageSize(parseInt(value))},_changePageSize:function(pageSize){if(pageSize!=this.options.pageSize){this.options.pageSize=pageSize;var pageCount=this._calculatePageCount();this._currentPageNo>pageCount&&(this._currentPageNo=pageCount),this._currentPageNo<=0&&(this._currentPageNo=1);var $pageSizeChangeCombobox=this._$bottomPanel.find(".jtable-page-size-change select");if(0<$pageSizeChangeCombobox.length)if(parseInt($pageSizeChangeCombobox.val())!=pageSize)0<$pageSizeChangeCombobox.find("option[value="+pageSize+"]").length&&$pageSizeChangeCombobox.val(pageSize);this._savePagingSettings(),this._reloadTable()}},_savePagingSettings:function(){this.options.saveUserPreferences&&this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function(){var loadUrl=base._createRecordLoadUrl.apply(this,arguments);return loadUrl=this._addPagingInfoToUrl(loadUrl,this._currentPageNo)},_createJtParamsForLoading:function(){var jtParams=base._createJtParamsForLoading.apply(this,arguments);return this.options.paging&&(jtParams.jtStartIndex=(this._currentPageNo-1)*this.options.pageSize,jtParams.jtPageSize=this.options.pageSize),jtParams},_addRowToTable:function($tableRow,index,isNewRow){isNewRow&&this.options.paging?this._reloadTable():base._addRowToTable.apply(this,arguments)},_addRow:function($row,options){options&&options.isNewRow&&this.options.paging?this._reloadTable():base._addRow.apply(this,arguments)},_removeRowsFromTable:function($rows,reason){base._removeRowsFromTable.apply(this,arguments),this.options.paging&&(this._$tableRows.length<=0&&1<this._currentPageNo&&--this._currentPageNo,this._reloadTable())},_onRecordsLoaded:function(data){this.options.paging&&(this._totalRecordCount=data.TotalRecordCount,this._createPagingList(),this._createPagingInfo()),base._onRecordsLoaded.apply(this,arguments)},_addPagingInfoToUrl:function(url,pageNumber){if(!this.options.paging)return url;var jtStartIndex=(pageNumber-1)*this.options.pageSize,jtPageSize=this.options.pageSize;return url+(url.indexOf("?")<0?"?":"&")+"jtStartIndex="+jtStartIndex+"&jtPageSize="+jtPageSize},_createPagingList:function(){if(!(this.options.pageSize<=0||(this._$pagingListArea.empty(),this._totalRecordCount<=0))){var pageCount=this._calculatePageCount();this._createFirstAndPreviousPageButtons(),"normal"==this.options.pageList&&this._createPageNumberButtons(this._calculatePageNumbers(pageCount)),this._createLastAndNextPageButtons(pageCount),this._bindClickEventsToPageNumberButtons()}},_createFirstAndPreviousPageButtons:function(){var $first=$("<li />").html('<a aria-label="First" href="#"><span aria-hidden="true">&lt&lt</span></a>').data("pageNumber",1).appendTo(this._$pagingListArea),$previous=$("<li />").html('<a aria-label="Previous" href="#"><span aria-hidden="true">&lt</span></a>').data("pageNumber",this._currentPageNo-1).appendTo(this._$pagingListArea);this._currentPageNo<=1&&($first.addClass("disabled"),$previous.addClass("disabled"))},_createLastAndNextPageButtons:function(pageCount){var $next=$("<li />").html('<a aria-label="Next" href="#"><span aria-hidden="true">&gt</span></a>').data("pageNumber",this._currentPageNo+1).appendTo(this._$pagingListArea),$last=$("<li />").html('<a aria-label="Last" href="#"><span aria-hidden="true">&gt&gt</span></a>').data("pageNumber",pageCount).appendTo(this._$pagingListArea);this._currentPageNo>=pageCount&&($next.addClass("disabled"),$last.addClass("disabled"))},_createPageNumberButtons:function(pageNumbers){for(var previousNumber=0,i=0;i<pageNumbers.length;i++)1<pageNumbers[i]-previousNumber&&$("<li />").html('<a href="#">...</a>').appendTo(this._$pagingListArea),this._createPageNumberButton(pageNumbers[i]),previousNumber=pageNumbers[i]},_createPageNumberButton:function(pageNumber){var $pageNumber=$("<li />").html('<a href="#">'+pageNumber+"</a>").data("pageNumber",pageNumber).appendTo(this._$pagingListArea);this._currentPageNo==pageNumber&&$pageNumber.addClass("active")},_calculatePageCount:function(){var pageCount=Math.floor(this._totalRecordCount/this.options.pageSize);return this._totalRecordCount%this.options.pageSize!=0&&++pageCount,pageCount},_calculatePageNumbers:function(pageCount){if(pageCount<=4){for(var pageNumbers=[],i=1;i<=pageCount;++i)pageNumbers.push(i);return pageNumbers}var shownPageNumbers=[1,2,pageCount-1,pageCount],previousPageNo=this._normalizeNumber(this._currentPageNo-1,1,pageCount,1),nextPageNo=this._normalizeNumber(this._currentPageNo+1,1,pageCount,1);return this._insertToArrayIfDoesNotExists(shownPageNumbers,previousPageNo),this._insertToArrayIfDoesNotExists(shownPageNumbers,this._currentPageNo),this._insertToArrayIfDoesNotExists(shownPageNumbers,nextPageNo),shownPageNumbers.sort(function(a,b){return a-b}),shownPageNumbers},_createPagingInfo:function(){if(this._totalRecordCount<=0)this._$pageInfoSpan.empty();else{var startNo=(this._currentPageNo-1)*this.options.pageSize+1,endNo=this._currentPageNo*this.options.pageSize;if(startNo<=(endNo=this._normalizeNumber(endNo,startNo,this._totalRecordCount,0))){var pagingInfoMessage=this._formatString(this.options.messages.pagingInfo,startNo,endNo,this._totalRecordCount);this._$pageInfoSpan.html(pagingInfoMessage)}}},_bindClickEventsToPageNumberButtons:function(){var self=this;self._$pagingListArea.find("li").not(".disabled").not(".active").click(function(e){e.preventDefault(),self._changePage($(this).data("pageNumber"))})},_changePage:function(pageNo){null!=pageNo&&(pageNo=this._normalizeNumber(pageNo,1,this._calculatePageCount(),1))!=this._currentPageNo&&(this._currentPageNo=pageNo,this._reloadTable())}})}(jQuery),function($){var base={_initializeFields:$.hik.jtable.prototype._initializeFields,_normalizeFieldOptions:$.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:$.hik.jtable.prototype._createHeaderCellForField,_createRecordLoadUrl:$.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:$.hik.jtable.prototype._createJtParamsForLoading};$.extend(!0,$.hik.jtable.prototype,{options:{sorting:!1,multiSorting:!1,defaultSorting:""},_lastSorting:null,_initializeFields:function(){base._initializeFields.apply(this,arguments),this._lastSorting=[],this.options.sorting&&this._buildDefaultSortingArray()},_normalizeFieldOptions:function(fieldName,props){base._normalizeFieldOptions.apply(this,arguments),props.sorting=0!=props.sorting},_createHeaderCellForField:function(fieldName,field){var $headerCell=base._createHeaderCellForField.apply(this,arguments);return this.options.sorting&&field.sorting&&this._makeColumnSortable($headerCell,fieldName),$headerCell},_createRecordLoadUrl:function(){var loadUrl=base._createRecordLoadUrl.apply(this,arguments);return loadUrl=this._addSortingInfoToUrl(loadUrl)},_buildDefaultSortingArray:function(){var self=this;$.each(self.options.defaultSorting.split(","),function(orderIndex,orderValue){$.each(self.options.fields,function(fieldName,fieldProps){if(fieldProps.sorting){var colOffset=orderValue.indexOf(fieldName);-1<colOffset&&(-1<orderValue.toUpperCase().indexOf(" DESC",colOffset)?self._lastSorting.push({fieldName:fieldName,sortOrder:"DESC"}):self._lastSorting.push({fieldName:fieldName,sortOrder:"ASC"}))}})})},_makeColumnSortable:function($columnHeader,fieldName){var self=this,$colspan=$('<span class="pull-right" aria-hidden="true"></span>').addClass("glyphicon glyphicon-sort");$columnHeader.append($colspan).click(function(e){e.preventDefault(),self.options.multiSorting&&e.ctrlKey||(self._lastSorting=[]),self._sortTableByColumn($columnHeader)}),$columnHeader.css({cursor:"pointer"}),$.each(this._lastSorting,function(sortIndex,sortField){sortField.fieldName==fieldName?($columnHeader.children().removeClass("glyphicon-sort"),"DESC"==sortField.sortOrder?$columnHeader.children().addClass("glyphicon-sort-by-attributes-alt"):$columnHeader.children().addClass("glyphicon-sort-by-attributes")):$columnHeader.children().addClass("glyphicon-sort")})},_sortTableByColumn:function($columnHeader){0==this._lastSorting.length&&($columnHeader.siblings().children().addClass("glyphicon-sort"),$columnHeader.siblings().children().removeClass("glyphicon-sort-by-attributes glyphicon-sort-by-attributes-alt"));for(var i=0;i<this._lastSorting.length;i++)this._lastSorting[i].fieldName==$columnHeader.data("fieldName")&&this._lastSorting.splice(i--,1);$columnHeader.children().hasClass("glyphicon-sort-by-attributes")?($columnHeader.children().removeClass("glyphicon-sort-by-attributes").addClass("glyphicon-sort-by-attributes-alt"),this._lastSorting.push({fieldName:$columnHeader.data("fieldName"),sortOrder:"DESC"})):($columnHeader.children().removeClass("glyphicon-sort-by-attributes-alt").addClass("glyphicon-sort-by-attributes"),this._lastSorting.push({fieldName:$columnHeader.data("fieldName"),sortOrder:"ASC"})),this._reloadTable()},_addSortingInfoToUrl:function(url){if(!this.options.sorting||0==this._lastSorting.length)return url;var sorting=[];return $.each(this._lastSorting,function(idx,value){sorting.push(value.fieldName+" "+value.sortOrder)}),url+(url.indexOf("?")<0?"?":"&")+"jtSorting="+sorting.join(",")},_createJtParamsForLoading:function(){var jtParams=base._createJtParamsForLoading.apply(this,arguments);if(this.options.sorting&&this._lastSorting.length){var sorting=[];$.each(this._lastSorting,function(idx,value){sorting.push(value.fieldName+" "+value.sortOrder)}),jtParams.jtSorting=sorting.join(",")}return jtParams}})}(jQuery),function($){var base={_create:$.hik.jtable.prototype._create,_normalizeFieldOptions:$.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:$.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:$.hik.jtable.prototype._createCellForRecordField};$.extend(!0,$.hik.jtable.prototype,{options:{tableId:void 0,columnResizable:!0,columnSelectable:!0},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){base._create.apply(this,arguments),this._createColumnResizeBar(),this._createColumnSelection(),this.options.saveUserPreferences&&this._loadColumnSettings(),this._normalizeColumnWidths()},_normalizeFieldOptions:function(fieldName,props){base._normalizeFieldOptions.apply(this,arguments),this.options.columnResizable&&(props.columnResizable=0!=props.columnResizable),props.visibility||(props.visibility="visible")},_createHeaderCellForField:function(fieldName,field){var $headerCell=base._createHeaderCellForField.apply(this,arguments);return this.options.columnResizable&&field.columnResizable&&fieldName!=this._columnList[this._columnList.length-1]&&this._makeColumnResizable($headerCell),"hidden"==field.visibility&&$headerCell.hide(),$headerCell},_createCellForRecordField:function(record,fieldName){var $column=base._createCellForRecordField.apply(this,arguments);return"hidden"==this.options.fields[fieldName].visibility&&$column.hide(),$column},changeColumnVisibility:function(columnName,visibility){this._changeColumnVisibilityInternal(columnName,visibility),this._normalizeColumnWidths(),this.options.saveUserPreferences&&this._saveColumnSettings()},_changeColumnVisibilityInternal:function(columnName,visibility){var columnIndex=this._columnList.indexOf(columnName);if(columnIndex<0)this._logWarn('Column "'+columnName+'" does not exist in fields!');else if(["visible","hidden","fixed"].indexOf(visibility)<0)this._logWarn('Visibility value is not valid: "'+visibility+'"! Options are: visible, hidden, fixed.');else{var field=this.options.fields[columnName];if(field.visibility!=visibility){var columnIndexInTable=this._firstDataColumnOffset+columnIndex+1;"hidden"!=field.visibility&&"hidden"==visibility?this._$table.find(">thead >tr >th:nth-child("+columnIndexInTable+"),>tbody >tr >td:nth-child("+columnIndexInTable+")").hide():"hidden"==field.visibility&&"hidden"!=visibility&&this._$table.find(">thead >tr >th:nth-child("+columnIndexInTable+"),>tbody >tr >td:nth-child("+columnIndexInTable+")").show().css("display","table-cell"),field.visibility=visibility}}},_normalizeColumnWidths:function(){},_createColumnSelection:function(){var self=this;this._$columnSelectionDiv=$("<div />").addClass("jtable-column-selection-container").appendTo(self._$mainContainer),this._$table.children("thead").bind("contextmenu",function(e){if(self.options.columnSelectable){e.preventDefault(),$("<div />").addClass("jtable-contextmenu-overlay").click(function(){$(this).remove(),self._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return!1}).appendTo(document.body),self._fillColumnSelection();var containerOffset=self._$mainContainer.offset(),selectionDivTop=e.pageY-containerOffset.top,selectionDivLeft=e.pageX-containerOffset.left,containerWidth=self._$mainContainer.width();100<containerWidth&&containerWidth-100<selectionDivLeft&&(selectionDivLeft=containerWidth-100),self._$columnSelectionDiv.css({position:"absolute",left:selectionDivLeft,top:selectionDivTop,"min-width":"100px"}).show()}})},_fillColumnSelection:function(){for(var self=this,$columnsUl=$("<ul></ul>").addClass("jtable-column-select-list"),i=0;i<this._columnList.length;i++){var columnName=this._columnList[i],field=this.options.fields[columnName],$columnLi=$("<li></li>").appendTo($columnsUl),$label=$('<label for="'+columnName+'"></label>').append($("<span>"+(field.title||columnName)+"</span>")).appendTo($columnLi),$checkbox=$('<input type="checkbox" name="'+columnName+'">').prependTo($label).click(function(){var $clickedCheckbox=$(this),clickedColumnName=$clickedCheckbox.attr("name");"fixed"!=self.options.fields[clickedColumnName].visibility&&self.changeColumnVisibility(clickedColumnName,$clickedCheckbox.is(":checked")?"visible":"hidden")});"hidden"!=field.visibility&&$checkbox.attr("checked","checked"),"fixed"==field.visibility&&$checkbox.attr("disabled","disabled")}this._$columnSelectionDiv.html($columnsUl)},_createColumnResizeBar:function(){this._$columnResizeBar=$("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function($columnHeader){var self=this;$("<div />").addClass("jtable-column-resize-handler").appendTo($columnHeader.find(".jtable-column-header-container")).mousedown(function(downevent){downevent.preventDefault(),downevent.stopPropagation();var mainContainerOffset=self._$mainContainer.offset(),$nextColumnHeader=$columnHeader.nextAll("th.jtable-column-header:visible:first");if($nextColumnHeader.length){self._currentResizeArgs={currentColumnStartWidth:$columnHeader.outerWidth(),minWidth:10,maxWidth:$columnHeader.outerWidth()+$nextColumnHeader.outerWidth()-10,mouseStartX:downevent.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};function resizeonmousemove(moveevent){if(self._currentResizeArgs){var resizeBarX=self._normalizeNumber(moveevent.pageX,self._currentResizeArgs.minResizeX(),self._currentResizeArgs.maxResizeX());self._$columnResizeBar.css("left",resizeBarX-mainContainerOffset.left+"px")}}var resizeonmouseup=function(upevent){if(self._currentResizeArgs){$(document).unbind("mousemove",resizeonmousemove),$(document).unbind("mouseup",resizeonmouseup),self._$columnResizeBar.hide();var mouseChangeX=upevent.pageX-self._currentResizeArgs.mouseStartX,currentColumnFinalWidth=self._normalizeNumber(self._currentResizeArgs.currentColumnStartWidth+mouseChangeX,self._currentResizeArgs.minWidth,self._currentResizeArgs.maxWidth),nextColumnFinalWidth=$nextColumnHeader.outerWidth()+(self._currentResizeArgs.currentColumnStartWidth-currentColumnFinalWidth),pixelToPercentRatio=$columnHeader.data("width-in-percent")/self._currentResizeArgs.currentColumnStartWidth;$columnHeader.data("width-in-percent",currentColumnFinalWidth*pixelToPercentRatio),$nextColumnHeader.data("width-in-percent",nextColumnFinalWidth*pixelToPercentRatio),$columnHeader.css("width",$columnHeader.data("width-in-percent")+"%"),$nextColumnHeader.css("width",$nextColumnHeader.data("width-in-percent")+"%"),self._normalizeColumnWidths(),self._currentResizeArgs=null,self.options.saveUserPreferences&&self._saveColumnSettings()}};self._$columnResizeBar.show().css({top:$columnHeader.offset().top-mainContainerOffset.top+"px",left:downevent.pageX-mainContainerOffset.left+"px",height:self._$table.outerHeight()+"px"}),$(document).bind("mousemove",resizeonmousemove),$(document).bind("mouseup",resizeonmouseup)}})},_saveColumnSettings:function(){var self=this,fieldSettings="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var $cell=$(this),fieldName=$cell.data("fieldName"),columnWidth=$cell.data("width-in-percent"),fieldVisibility=self.options.fields[fieldName].visibility;fieldSettings=fieldSettings+(fieldName+"="+fieldVisibility+";"+columnWidth)+"|"}),this._setCookie("column-settings",fieldSettings.substr(0,fieldSettings.length-1))},_loadColumnSettings:function(){var self=this,columnSettingsCookie=this._getCookie("column-settings");if(columnSettingsCookie){var columnSettings={};$.each(columnSettingsCookie.split("|"),function(inx,fieldSetting){var splitted=fieldSetting.split("="),fieldName=splitted[0],settings=splitted[1].split(";");columnSettings[fieldName]={columnVisibility:settings[0],columnWidth:settings[1]}}),this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var $cell=$(this),fieldName=$cell.data("fieldName"),field=self.options.fields[fieldName];columnSettings[fieldName]&&("fixed"!=field.visibility&&self._changeColumnVisibilityInternal(fieldName,columnSettings[fieldName].columnVisibility),$cell.data("width-in-percent",columnSettings[fieldName].columnWidth).css("width",columnSettings[fieldName].columnWidth+"%"))})}}})}(jQuery),function($){var base={_removeRowsFromTable:$.hik.jtable.prototype._removeRowsFromTable};$.extend(!0,$.hik.jtable.prototype,{options:{openChildAsAccordion:!1},openChildTable:function($row,tableOptions,opened){var self=this;tableOptions.showCloseButton=0!=tableOptions.showCloseButton,tableOptions.showCloseButton&&!tableOptions.closeRequested&&(tableOptions.closeRequested=function(){self.closeChildTable($row)}),self.options.openChildAsAccordion&&$row.siblings(".jtable-data-row").each(function(){self.closeChildTable($(this))}),self.closeChildTable($row,function(){var $childRowColumn=self.getChildRow($row).children("td").empty(),$childTableContainer=$("<div />").addClass("jtable-child-table-container").appendTo($childRowColumn);$childRowColumn.data("childTable",$childTableContainer),$childTableContainer.jtable(tableOptions),self.openChildRow($row),$childTableContainer.hide().slideDown("fast",function(){opened&&opened({childTable:$childTableContainer})})})},closeChildTable:function($row,closed){var self=this,$childRowColumn=this.getChildRow($row).children("td"),$childTable=$childRowColumn.data("childTable");$childTable?($childRowColumn.data("childTable",null),$childTable.slideUp("fast",function(){$childTable.jtable("destroy"),$childTable.remove(),self.closeChildRow($row),closed&&closed()})):closed&&closed()},isChildRowOpen:function($row){return this.getChildRow($row).is(":visible")},getChildRow:function($row){return $row.data("childRow")||this._createChildRow($row)},openChildRow:function($row){var $childRow=this.getChildRow($row);return $childRow.is(":visible")||$childRow.show(),$childRow},closeChildRow:function($row){var $childRow=this.getChildRow($row);$childRow.is(":visible")&&$childRow.hide()},_removeRowsFromTable:function($rows,reason){"deleted"==reason&&$rows.each(function(){var $childRow=$(this).data("childRow");$childRow&&$childRow.remove()}),base._removeRowsFromTable.apply(this,arguments)},_createChildRow:function($row){var totalColumnCount=this._$table.find("thead th").length,$childRow=$("<tr></tr>").addClass("jtable-child-row").append('<td colspan="'+totalColumnCount+'"></td>');return $row.after($childRow),$row.data("childRow",$childRow),$childRow.hide(),$childRow}})}(jQuery);